Bootstrap: docker
From: ghcr.io/huggingface/text-generation-inference:latest

%environment
    export PYTHONUNBUFFERED=1

%runscript
    exec text-generation-launcher --model-id /model --port 8000 --hostname 0.0.0.0

%labels
    Author luka.panic@pixion.co
    Version v0.0.1

%help
    Description:
        A server for Text Generation Inference (TGI) from Hugging Face.

    Build:
        apptainer build tgi_server.sif tgi_server.def

    Environment:
        - MODEL_HUB_ID

    Usage:
        apptainer run --nv --bind $PWD/data/$MODEL_HUB_ID:/model tgi_server.sif