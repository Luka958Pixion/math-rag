Bootstrap: docker
From: ghcr.io/huggingface/text-generation-inference:latest

%environment
    export PYTHONUNBUFFERED=1

%startscript
    text-generation-launcher --model-id /model --port 8000 --hostname 0.0.0.0

%labels
    Author luka.panic@pixion.co
    Version v0.0.1

%help
    Description:
        A server for Text Generation Inference (TGI) from Hugging Face.

    Build:
        apptainer build server.sif server.def

    Environment:
        - MODEL_HUB_ID

    Usage:
        apptainer instance start \
            --nv \
            --bind "$PWD/mount/$MODEL_HUB_ID:/model" \
            server.sif \
            tgi_server_instance